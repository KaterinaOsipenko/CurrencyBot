2022-08-27 13:10:17,226 INFO com.spring.currency.bot.SpingCurrencyBotApplication [main] Starting SpingCurrencyBotApplication using Java 17.0.2 on sladkiychay3005 with PID 6348 (D:\Studying\tg-bots\sping-currency-bot\target\classes started by Дом in D:\Studying\tg-bots\sping-currency-bot)
2022-08-27 13:10:17,269 INFO com.spring.currency.bot.SpingCurrencyBotApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-08-27 13:10:19,392 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-08-27 13:10:19,716 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 316 ms. Found 1 JPA repository interfaces.
2022-08-27 13:10:21,452 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2022-08-27 13:10:21,464 INFO org.apache.coyote.http11.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8080"]
2022-08-27 13:10:21,464 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2022-08-27 13:10:21,464 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-08-27 13:10:21,878 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2022-08-27 13:10:21,878 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 4482 ms
2022-08-27 13:10:22,196 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-08-27 13:10:22,279 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-08-27 13:10:22,570 INFO org.hibernate.annotations.common.Version [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-08-27 13:10:22,727 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-08-27 13:10:24,226 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-08-27 13:10:24,241 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2022-08-27 13:10:25,284 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-08-27 13:10:25,290 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-08-27 13:10:25,555 INFO com.spring.currency.bot.TelegramBot [main] Bot creation
2022-08-27 13:10:35,247 INFO com.spring.currency.bot.TelegramBot [main] Set commands to the bot
2022-08-27 13:10:35,248 INFO com.spring.currency.bot.service.HashMapCurrencyModeService [main] HashMapCurrencyService created!
2022-08-27 13:10:35,543 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-08-27 13:10:35,851 INFO org.apache.coyote.http11.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8080"]
2022-08-27 13:10:35,871 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2022-08-27 13:10:37,304 INFO com.spring.currency.bot.SpingCurrencyBotApplication [main] Started SpingCurrencyBotApplication in 20.571 seconds (JVM running for 23.75)
2022-08-27 13:11:13,769 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Registered user with username: User(chatId=481582091, username=sladkiy_chay, firstName=null, lastName=null, registerDate=2022-08-27 13:11:13.286)
2022-08-27 13:11:13,894 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:11:14,033 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:11:14,122 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:11:14,122 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:11:15,566 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle callback query from keyboard.
2022-08-27 13:11:17,035 INFO com.spring.currency.bot.connector.HttpConnector [CurrCurrencyBot Telegram Executor] Connecting to API...
2022-08-27 13:11:17,724 INFO com.spring.currency.bot.service.MonobankService [CurrCurrencyBot Telegram Executor] Receiving all currencies from API response.
2022-08-27 13:11:17,724 INFO com.spring.currency.bot.service.CurrencyConversionServiceImpl [CurrCurrencyBot Telegram Executor] Converting of value done.
2022-08-27 13:11:17,833 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:11:17,833 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:11:19,799 INFO com.spring.currency.bot.service.CurrencyConversionServiceImpl [CurrCurrencyBot Telegram Executor] Converting of value done.
2022-08-27 13:11:19,957 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:11:19,957 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:11:21,203 INFO com.spring.currency.bot.service.CurrencyConversionServiceImpl [CurrCurrencyBot Telegram Executor] Converting of value done.
2022-08-27 13:11:21,369 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:11:21,369 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:11:30,383 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-08-27 13:11:30,399 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-08-27 13:11:30,414 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
2022-08-27 13:44:00,836 INFO com.spring.currency.bot.SpingCurrencyBotApplication [main] Starting SpingCurrencyBotApplication using Java 17.0.2 on sladkiychay3005 with PID 13136 (D:\Studying\tg-bots\sping-currency-bot\target\classes started by Дом in D:\Studying\tg-bots\sping-currency-bot)
2022-08-27 13:44:00,836 INFO com.spring.currency.bot.SpingCurrencyBotApplication [main] No active profile set, falling back to 1 default profile: "default"
2022-08-27 13:44:01,402 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2022-08-27 13:44:01,449 INFO org.springframework.data.repository.config.RepositoryConfigurationDelegate [main] Finished Spring Data repository scanning in 46 ms. Found 1 JPA repository interfaces.
2022-08-27 13:44:01,902 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat initialized with port(s): 8080 (http)
2022-08-27 13:44:01,918 INFO org.apache.coyote.http11.Http11NioProtocol [main] Initializing ProtocolHandler ["http-nio-8080"]
2022-08-27 13:44:01,918 INFO org.apache.catalina.core.StandardService [main] Starting service [Tomcat]
2022-08-27 13:44:01,918 INFO org.apache.catalina.core.StandardEngine [main] Starting Servlet engine: [Apache Tomcat/9.0.65]
2022-08-27 13:44:02,058 INFO org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] [main] Initializing Spring embedded WebApplicationContext
2022-08-27 13:44:02,058 INFO org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext [main] Root WebApplicationContext: initialization completed in 1169 ms
2022-08-27 13:44:02,230 INFO org.hibernate.jpa.internal.util.LogHelper [main] HHH000204: Processing PersistenceUnitInfo [name: default]
2022-08-27 13:44:02,277 INFO org.hibernate.Version [main] HHH000412: Hibernate ORM core version 5.6.10.Final
2022-08-27 13:44:02,402 INFO org.hibernate.annotations.common.Version [main] HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2022-08-27 13:44:02,511 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Starting...
2022-08-27 13:44:03,339 INFO com.zaxxer.hikari.HikariDataSource [main] HikariPool-1 - Start completed.
2022-08-27 13:44:03,339 INFO org.hibernate.dialect.Dialect [main] HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2022-08-27 13:44:04,105 INFO org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator [main] HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2022-08-27 13:44:04,105 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [main] Initialized JPA EntityManagerFactory for persistence unit 'default'
2022-08-27 13:44:04,261 INFO com.spring.currency.bot.TelegramBot [main] Bot creation
2022-08-27 13:44:04,699 INFO com.spring.currency.bot.TelegramBot [main] Set commands to the bot
2022-08-27 13:44:04,699 INFO com.spring.currency.bot.service.HashMapCurrencyModeService [main] HashMapCurrencyService created!
2022-08-27 13:44:04,933 WARN org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration [main] spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2022-08-27 13:44:05,183 INFO org.apache.coyote.http11.Http11NioProtocol [main] Starting ProtocolHandler ["http-nio-8080"]
2022-08-27 13:44:05,230 INFO org.springframework.boot.web.embedded.tomcat.TomcatWebServer [main] Tomcat started on port(s): 8080 (http) with context path ''
2022-08-27 13:44:05,300 INFO com.spring.currency.bot.SpingCurrencyBotApplication [main] Started SpingCurrencyBotApplication in 4.865 seconds (JVM running for 6.444)
2022-08-27 13:44:31,311 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Registered user with username: User(chatId=481582091, username=sladkiy_chay, firstName=null, lastName=null, registerDate=2022-08-27 13:44:31.199)
2022-08-27 13:44:31,436 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:44:31,530 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:44:31,601 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:44:31,601 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:44:33,124 INFO com.spring.currency.bot.connector.HttpConnector [CurrCurrencyBot Telegram Executor] Connecting to API...
2022-08-27 13:44:33,664 INFO com.spring.currency.bot.service.MonobankService [CurrCurrencyBot Telegram Executor] Receiving all currencies from API response.
2022-08-27 13:44:33,664 ERROR org.telegram.telegrambots.updatesreceivers.DefaultBotSession [CurrCurrencyBot Telegram Executor] No value present
java.util.NoSuchElementException: No value present
	at java.base/java.util.Optional.get(Optional.java:143)
	at com.spring.currency.bot.service.CurrencyConversionServiceImpl.getOneCurrency(CurrencyConversionServiceImpl.java:72)
	at com.spring.currency.bot.service.CurrencyConversionServiceImpl.getCurrency(CurrencyConversionServiceImpl.java:63)
	at com.spring.currency.bot.service.CurrencyConversionServiceImpl.getRatio(CurrencyConversionServiceImpl.java:42)
	at com.spring.currency.bot.service.CurrencyConversionServiceImpl.getResultCurrency(CurrencyConversionServiceImpl.java:26)
	at com.spring.currency.bot.TelegramBot.handleMessageDigit(TelegramBot.java:155)
	at com.spring.currency.bot.TelegramBot.handleMessage(TelegramBot.java:141)
	at com.spring.currency.bot.TelegramBot.onUpdateReceived(TelegramBot.java:87)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.telegram.telegrambots.meta.generics.LongPollingBot.onUpdatesReceived(LongPollingBot.java:27)
	at org.telegram.telegrambots.updatesreceivers.DefaultBotSession$HandlerThread.run(DefaultBotSession.java:317)
2022-08-27 13:44:35,243 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle callback query from keyboard.
2022-08-27 13:44:36,210 INFO com.spring.currency.bot.service.CurrencyConversionServiceImpl [CurrCurrencyBot Telegram Executor] Converting of value done.
2022-08-27 13:44:36,300 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:44:36,300 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:44:37,959 INFO com.spring.currency.bot.service.CurrencyConversionServiceImpl [CurrCurrencyBot Telegram Executor] Converting of value done.
2022-08-27 13:44:38,090 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:44:38,090 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:44:39,493 INFO com.spring.currency.bot.service.CurrencyConversionServiceImpl [CurrCurrencyBot Telegram Executor] Converting of value done.
2022-08-27 13:44:39,658 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Replied to user: sladkiy_chay
2022-08-27 13:44:39,658 INFO com.spring.currency.bot.TelegramBot [CurrCurrencyBot Telegram Executor] Handle message.
2022-08-27 13:45:09,229 INFO org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean [SpringApplicationShutdownHook] Closing JPA EntityManagerFactory for persistence unit 'default'
2022-08-27 13:45:09,230 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown initiated...
2022-08-27 13:45:09,238 INFO com.zaxxer.hikari.HikariDataSource [SpringApplicationShutdownHook] HikariPool-1 - Shutdown completed.
